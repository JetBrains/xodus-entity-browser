buildscript {
    ext.xodusVersion = '1.2.3523'
    ext.kotlinVersion = '1.3.21'
    ext.buildVersion = '1.3.0'
    ext.ktorVersion = '1.1.2'

    repositories {
        mavenCentral()
        maven { url 'http://jetbrains.bintray.com/xodus' }
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
    }
}

plugins {
    id 'java'
    id 'idea'                                         // ide sync fine tuning
    id 'com.github.johnrengelman.shadow' version '4.0.2'
}

apply plugin: 'kotlin'

ext.globalArtifactsBuildDir = buildDir
group = 'org.jetbrains.xodus'

allprojects {
    apply plugin: 'java'
    apply plugin: 'idea'
    apply plugin: 'maven'
    apply plugin: 'maven-publish'
    sourceCompatibility = 1.8
    version = buildVersion

    repositories {
        mavenCentral()
        maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
        maven { url 'http://jetbrains.bintray.com/xodus' }
        maven { url 'https://kotlin.bintray.com/kotlinx' }
    }

    idea {
        module {
            downloadSources = true
        }
    }

    test {
        minHeapSize = '512m'
        maxHeapSize = '512m'
        testLogging {
            showStandardStreams = true
            exceptionFormat = 'full'
        }
        outputs.upToDateWhen { false }
    }

}

defaultTasks 'clean build'

repositories {
    mavenCentral()
}